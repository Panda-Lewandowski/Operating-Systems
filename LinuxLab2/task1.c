/*
* РќР°РїРёСЃР°С‚СЊ РїСЂРѕРіСЂР°РјРјСѓ, Р·Р°РїСѓСЃРєР°СЋС‰СѓСЋ РЅРѕРІС‹Р№ РїСЂРѕС†РµСЃСЃ СЃРёСЃС‚РµРјРЅС‹Рј РІС‹Р·РѕРІРѕРј
* fork(). Р’ РїСЂРµРґРєРµ РІС‹РІРµСЃС‚Рё СЃРѕР±СЃС‚РІРµРЅРЅС‹Р№ РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ ( С„СѓРЅРєС†РёСЏ
* getpid()), РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ РіСЂСѓРїРїС‹ ( С„СѓРЅРєС†РёСЏ getpgrp())  Рё
* РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ РїРѕС‚РѕРјРєР°. Р’ РїСЂРѕС†РµСЃСЃРµ-РїРѕС‚РѕРјРєРµ РІС‹РІРµСЃС‚Рё СЃРѕР±СЃС‚РІРµРЅРЅС‹Р№
* РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ, РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ РїСЂРµРґРєР° ( С„СѓРЅРєС†РёСЏ getppid()) Рё
* РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ РіСЂСѓРїРїС‹. РЈР±РµРґРёС‚СЊСЃСЏ, С‡С‚Рѕ РїСЂРё Р·Р°РІРµСЂС€РµРЅРёРё РїСЂРѕС†РµСЃСЃР°-РїСЂРµРґРєР°
* РїРѕС‚РѕРјРѕРє РїРѕР»СѓС‡Р°РµС‚ РёРґРµРЅС‚РёС„РёРєР°С‚РѕСЂ РїСЂРµРґРєР° (PPID), СЂР°РІРЅС‹Р№ 1.
*/

#include <stdio.h> //printf
#include <stdlib.h> //exit


int main()
{
	int child = fork();
	if ( child == -1 )
	{
		perror("couldn't fork.");
		exit(1);
	}
	if ( child == 0 )
	{
        //������������� ���
        sleep(2);
        printf( "Child: pid=%d;	group=%d;	parent=%d\n", getpid(), getpgrp(), getppid() );

		return 0;
	}
	else
	{
		//СЂРѕРґРёС‚РµР»СЊСЃРєРёР№ РєРѕРґ
        	printf( "Parent: pid=%d;	group=%d;	child=%d\n", getpid(), getpgrp(), child );
		return 0;
	}
}
